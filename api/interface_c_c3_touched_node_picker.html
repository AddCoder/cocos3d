<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Cocos3D: CC3TouchedNodePicker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cocos3D
   &#160;<span id="projectnumber">2.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_c_c3_touched_node_picker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CC3TouchedNodePicker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;CC3Scene.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CC3TouchedNodePicker:</div>
<div class="dyncontent">
<div class="center"><img src="interface_c_c3_touched_node_picker__inherit__graph.png" border="0" usemap="#_c_c3_touched_node_picker_inherit__map" alt="Inheritance graph"/></div>
<map name="_c_c3_touched_node_picker_inherit__map" id="_c_c3_touched_node_picker_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:ab508673a7eb031f086af4eb48ddccb18"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_touched_node_picker.html#ab508673a7eb031f086af4eb48ddccb18">dispatchPickedNode</a></td></tr>
<tr class="separator:ab508673a7eb031f086af4eb48ddccb18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0478fe3b85ce28a2231e368997a0ed"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_touched_node_picker.html#a0a0478fe3b85ce28a2231e368997a0ed">initOnScene:</a></td></tr>
<tr class="separator:a0a0478fe3b85ce28a2231e368997a0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a040b6ca1a3ae0d127fef26b6df361494"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_touched_node_picker.html#a040b6ca1a3ae0d127fef26b6df361494">pickNodeFromTouchEvent:at:</a></td></tr>
<tr class="separator:a040b6ca1a3ae0d127fef26b6df361494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a61606d75ba2055eace2785aa5a1dd8"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_touched_node_picker.html#a8a61606d75ba2055eace2785aa5a1dd8">pickTouchedNodeWithVisitor:</a></td></tr>
<tr class="separator:a8a61606d75ba2055eace2785aa5a1dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:a21816a909ba49a391f7b5d7df6749e76"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_c3_touched_node_picker.html#a21816a909ba49a391f7b5d7df6749e76">pickerOnScene:</a></td></tr>
<tr class="separator:a21816a909ba49a391f7b5d7df6749e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:acd2f0497b54954b031a788df2d349eaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_node.html">CC3Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#acd2f0497b54954b031a788df2d349eaf">pickedNode</a></td></tr>
<tr class="separator:acd2f0497b54954b031a788df2d349eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75dc677c42e4fff5e2c41bf11b10e6a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_node_picking_visitor.html">CC3NodePickingVisitor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#a75dc677c42e4fff5e2c41bf11b10e6a3">pickVisitor</a></td></tr>
<tr class="separator:a75dc677c42e4fff5e2c41bf11b10e6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8662d9acee6ad7dd7e597bd00f556d0"><td class="memItemLeft" align="right" valign="top">CGPoint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#ae8662d9acee6ad7dd7e597bd00f556d0">touchPoint</a></td></tr>
<tr class="separator:ae8662d9acee6ad7dd7e597bd00f556d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="interface_c_c3_touched_node_picker.html" title="A CC3TouchedNodePicker instance handles picking nodes from touch events in a CC3Scene. ">CC3TouchedNodePicker</a> instance handles picking nodes from touch events in a <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a>. </p>
<p>This handler maintains a queue of touch types, to ensure than none are missed. However, it does not keep a queue of touch points. Instead, it uses the most recent touch point to determine the 3D object under the touch point.</p>
<p>This handler picks 3D nodes using a color picking algorithm. When a touch event occurs, its type is added to the queue, and the touch position is updated. On the next rendering pass, the 3D scene is rendered so that each 3D node has a unique color. The color of the pixel under the touch point then identifies the node that was touched. The scene is then re-rendered in true colors in the same rendering pass, so the user never sees the unique-color rendering that was used to pick the node.</p>
<p>Once the node is picked, it is cached. On the next update pass, the node is picked up and all touch events that occured since the previous update pass are dispatched to the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a> in sequence.</p>
<p>This asychronous design keeps the update and rendering loops from interfering with each other. The rendering loop only has to pick the object that is under the touch point that was most recently recorded. And if the dispatching of events takes time, only the update loop will be affected. The rendering loop can continue unhindered.</p>
<p>For rapid finger movements, it is quite likely that more than one touch event could arrive before the next rendering pass picks a 3D node. For this reason, no attempt is made to find the node for each and every touch location. In addition, the touch type is only added to the queue if it is different than the previous touch type. For example, a rapid inflow of kCCTouchMoved events will only result in a single kCCTouchMoved event being picked and dispatched to the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a> on each pair of rendering and updating passes. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="ab508673a7eb031f086af4eb48ddccb18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) dispatchPickedNode </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a> during update operations, in the update loop that occurs occurs just after a touch event has been received by the touchEvent:at: method, and after a node has been picked as a result, by the pickTouchedNodeWithVisitor: method. </p>
<p>This implementation invokes the nodeSelected:byTouchEvent:at: method on the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a> instance.</p>
<p>This method is invoked automatically whenever a touch event occurs. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<a class="anchor" id="a0a0478fe3b85ce28a2231e368997a0ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initOnScene: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_scene.html">CC3Scene</a> *)&#160;</td>
          <td class="paramname"><em>aCC3Scene</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes this instance on the specified <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a>. </p>

</div>
</div>
<a class="anchor" id="a21816a909ba49a391f7b5d7df6749e76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (id) pickerOnScene: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_scene.html">CC3Scene</a> *)&#160;</td>
          <td class="paramname"><em>aCC3Scene</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates and initializes an autoreleased instance on the specified <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a>. </p>

</div>
</div>
<a class="anchor" id="a040b6ca1a3ae0d127fef26b6df361494"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) pickNodeFromTouchEvent: </td>
          <td></td>
          <td class="paramtype">(uint)&#160;</td>
          <td class="paramname"><em>tType</em></td>
        </tr>
        <tr>
          <td class="paramkey">at:</td>
          <td></td>
          <td class="paramtype">(CGPoint)&#160;</td>
          <td class="paramname"><em>tPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that a node should be picked for the touch event of the specified type that occurred at the specified point, which is the location in the 2D coordinate system of the <a class="el" href="interface_c_c3_layer.html" title="CC3Layer is a Cocos2D CCLayer that supports full 3D rendering in combination with normal Cocos2D 2D r...">CC3Layer</a> where the touch occurred. </p>
<p>The tType is one of the enumerated touch types: kCCTouchBegan, kCCTouchMoved, kCCTouchEnded, or kCCTouchCancelled.</p>
<p>The event is queued internally, and the node is picked asychronously during the next rendering frame when the pickTouchedNodeWithVisitor: method is automatically invoked. </p>

</div>
</div>
<a class="anchor" id="a8a61606d75ba2055eace2785aa5a1dd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) pickTouchedNodeWithVisitor: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_node_drawing_visitor.html">CC3NodeDrawingVisitor</a> *)&#160;</td>
          <td class="paramname"><em>visitor</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a> during drawing operations in the rendering frame that occurs just after a touch event has been received by the touchEvent:at: method. </p>
<p>The picking algorithm runs a specialized drawing routine that paints each node with a unique color. The algorithm then reads the color of the pixel under the touch point from the GL color buffer. The received color is then mapped back to the node that was painted with that color.</p>
<p>This specialized coloring algorithm is inserted into normal drawing operations when (and only when) a touch event has been received. Once the node has been picked, the drawing operations are re-run in normal fashion prior to the final posting of the frame to the display.</p>
<p>The coloring-and-picking algorithm is run only once per touch event, and is not run during rendering frames when there has been no touch event received.</p>
<p>Rendering for node picking uses a specialized internal drawing visitor. The specified visitor is not used to render the scene for node picking. Instead, the internal drawing visitor is aligned with the specified visitor, and is then used to render the scene.</p>
<p>This method is invoked automatically whenever a touch event occurs. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="acd2f0497b54954b031a788df2d349eaf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_node.html">CC3Node</a>*) pickedNode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span><span class="mlabel">nonatomic</span><span class="mlabel">retain</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The currently picked node. </p>
<p>The value of this property is ephemeral, and contains a non-nil value only during node picking from touch handling. The value is set by the pickTouchedNodeWithVisitor: method, and is cleared by the dispatchPickedNode method. </p>

</div>
</div>
<a class="anchor" id="a75dc677c42e4fff5e2c41bf11b10e6a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_node_picking_visitor.html">CC3NodePickingVisitor</a>*) pickVisitor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span><span class="mlabel">nonatomic</span><span class="mlabel">retain</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The visitor that is used to visit the nodes to draw them when picking a node from touch selection. </p>
<p>This property defaults to an instance of the class returned by the pickVisitorClass method of the <a class="el" href="interface_c_c3_scene.html" title="CC3Scene is a CC3Node that manages a 3D scene. ">CC3Scene</a>. The application can set a different visitor if desired. </p>

</div>
</div>
<a class="anchor" id="ae8662d9acee6ad7dd7e597bd00f556d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (CGPoint) touchPoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The most recent touch point in Cocos2D coordinates. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_c_c3_scene_8h.html">CC3Scene.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 19 2014 21:44:32 for Cocos3D by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
