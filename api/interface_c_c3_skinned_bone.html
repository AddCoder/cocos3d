<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Cocos3D: Cocos3D API reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-cocos3d.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">
	   <a href="http://cocos3d.org"><img src="http://cocos3d.org/images/cocos3d-Banner-55h.png" /></a>
	   <span id="projectnumber">v2.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_c_c3_skinned_bone-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CC3SkinnedBone Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;CC3VertexSkinning.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CC3SkinnedBone:</div>
<div class="dyncontent">
<div class="center"><img src="interface_c_c3_skinned_bone__inherit__graph.png" border="0" usemap="#_c_c3_skinned_bone_inherit__map" alt="Inheritance graph"/></div>
<map name="_c_c3_skinned_bone_inherit__map" id="_c_c3_skinned_bone_inherit__map">
<area shape="rect" id="node3" href="protocol_c_c3_node_transform_listener_protocol-p.html" title="This protocol defines the behaviour requirements for objects that wish to be notified whenever the tr..." alt="" coords="107,230,303,271"/><area shape="rect" id="node4" href="protocol_c_c3_node_listener_protocol-p.html" title="This protocol defines the behaviour requirements for objects that wish to be notified about the basic..." alt="" coords="109,155,301,181"/><area shape="rect" id="node5" href="protocol_c_c3_object-p.html" title="Extension to support Cocos3D functionality. " alt="" coords="154,80,256,107"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a9e2681141be724747085aaf8a433b4ab"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_skinned_bone.html#a9e2681141be724747085aaf8a433b4ab">initWithSkin:onBone:</a></td></tr>
<tr class="separator:a9e2681141be724747085aaf8a433b4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85eb905d437ac751706825dc6809f5a2"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_c_c3_skinned_bone.html#a85eb905d437ac751706825dc6809f5a2">markTransformDirty</a></td></tr>
<tr class="separator:a85eb905d437ac751706825dc6809f5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_protocol_c_c3_node_transform_listener_protocol-p"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_protocol_c_c3_node_transform_listener_protocol-p')"><img src="closed.png" alt="-"/>&#160;Instance Methods inherited from <a class="el" href="protocol_c_c3_node_transform_listener_protocol-p.html">&lt;CC3NodeTransformListenerProtocol&gt;</a></td></tr>
<tr class="memitem:a9058744bfedc513d4f7254e08d4ee4ca inherit pub_methods_protocol_c_c3_node_transform_listener_protocol-p"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_c_c3_node_transform_listener_protocol-p.html#a9058744bfedc513d4f7254e08d4ee4ca">nodeWasTransformed:</a></td></tr>
<tr class="separator:a9058744bfedc513d4f7254e08d4ee4ca inherit pub_methods_protocol_c_c3_node_transform_listener_protocol-p"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_protocol_c_c3_node_listener_protocol-p"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_protocol_c_c3_node_listener_protocol-p')"><img src="closed.png" alt="-"/>&#160;Instance Methods inherited from <a class="el" href="protocol_c_c3_node_listener_protocol-p.html">&lt;CC3NodeListenerProtocol&gt;</a></td></tr>
<tr class="memitem:ac2a1e1b221fe0b5396eab8d5111b950c inherit pub_methods_protocol_c_c3_node_listener_protocol-p"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_c_c3_node_listener_protocol-p.html#ac2a1e1b221fe0b5396eab8d5111b950c">nodeWasDestroyed:</a></td></tr>
<tr class="separator:ac2a1e1b221fe0b5396eab8d5111b950c inherit pub_methods_protocol_c_c3_node_listener_protocol-p"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_protocol_c_c3_object-p"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_protocol_c_c3_object-p')"><img src="closed.png" alt="-"/>&#160;Instance Methods inherited from <a class="el" href="protocol_c_c3_object-p.html">&lt;CC3Object&gt;</a></td></tr>
<tr class="memitem:ae90a8d444e163b09f369182af475cec1 inherit pub_methods_protocol_c_c3_object-p"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_c_c3_object-p.html#ae90a8d444e163b09f369182af475cec1">asWeakReference</a></td></tr>
<tr class="separator:ae90a8d444e163b09f369182af475cec1 inherit pub_methods_protocol_c_c3_object-p"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad618cbbe5b37970056beefd0372ff41f inherit pub_methods_protocol_c_c3_object-p"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_c_c3_object-p.html#ad618cbbe5b37970056beefd0372ff41f">fullDescription</a></td></tr>
<tr class="separator:ad618cbbe5b37970056beefd0372ff41f inherit pub_methods_protocol_c_c3_object-p"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1fce1fa7717aeb5d51f9ca917caf26 inherit pub_methods_protocol_c_c3_object-p"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_c_c3_object-p.html#a8d1fce1fa7717aeb5d51f9ca917caf26">resolveWeakReference</a></td></tr>
<tr class="separator:a8d1fce1fa7717aeb5d51f9ca917caf26 inherit pub_methods_protocol_c_c3_object-p"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:a281941f5c4f54e6fea7dc3942f8f764b"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_c_c3_skinned_bone.html#a281941f5c4f54e6fea7dc3942f8f764b">skinnedBoneWithSkin:onBone:</a></td></tr>
<tr class="separator:a281941f5c4f54e6fea7dc3942f8f764b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ab6f1b6cccf4faf5724d1e81e36371147"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_bone.html">CC3Bone</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skinned_bone.html#ab6f1b6cccf4faf5724d1e81e36371147">bone</a></td></tr>
<tr class="separator:ab6f1b6cccf4faf5724d1e81e36371147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ff8ac07b813baaae65239221c18720"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skinned_bone.html#ac0ff8ac07b813baaae65239221c18720">skinNode</a></td></tr>
<tr class="separator:ac0ff8ac07b813baaae65239221c18720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24761440440ac8284ceea2641bbc6ecf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_matrix.html">CC3Matrix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skinned_bone.html#a24761440440ac8284ceea2641bbc6ecf">transformMatrix</a></td></tr>
<tr class="separator:a24761440440ac8284ceea2641bbc6ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_c_c3_skinned_bone.html" title="CC3SkinnedBone combines the transforms of a bone and a skin mesh node, and applies these transforms t...">CC3SkinnedBone</a> combines the transforms of a bone and a skin mesh node, and applies these transforms to deform the vertices during rendering, or when the deformed location of a vertex is accessed programmatically. </p>
<p>An instance keeps track of two related transform matrices, a transformMatrix, which is used by the GL engine to deform the vertices during drawing, and a skinTransformMatrix, which is used to deform a vertex into the local coordinate system of the skin mesh node, so that it can be used programmatically.</p>
<p>The <a class="el" href="interface_c_c3_skinned_bone.html" title="CC3SkinnedBone combines the transforms of a bone and a skin mesh node, and applies these transforms t...">CC3SkinnedBone</a> instance registers as a transform listener with both the bone and the skin mesh node, and lazily recalculates the transformMatrix and skinTransformMatrix whenever the transform of either the bone or the skin mesh node changes. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a9e2681141be724747085aaf8a433b4ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithSkin: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *)&#160;</td>
          <td class="paramname"><em>aNode</em></td>
        </tr>
        <tr>
          <td class="paramkey">onBone:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_bone.html">CC3Bone</a> *)&#160;</td>
          <td class="paramname"><em>aBone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes this instance to apply the specified bone to the specified skin mesh node. </p>

</div>
</div>
<a class="anchor" id="a85eb905d437ac751706825dc6809f5a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) markTransformDirty </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks the transform matrix as dirty. </p>
<p>Once marked as dirty, the matrix will be lazily recalculated the next time the transformMatrix property is accessed.</p>
<p>This method is invoked automatically when the transform of either the bone or the skin mesh node being tracked by this instance is transformed. The application should never need to invoke this method directly. </p>

</div>
</div>
<a class="anchor" id="a281941f5c4f54e6fea7dc3942f8f764b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (id) skinnedBoneWithSkin: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *)&#160;</td>
          <td class="paramname"><em>aNode</em></td>
        </tr>
        <tr>
          <td class="paramkey">onBone:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_bone.html">CC3Bone</a> *)&#160;</td>
          <td class="paramname"><em>aBone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates and initializes an instance to apply the specified bone to the specified skin mesh node. </p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="ab6f1b6cccf4faf5724d1e81e36371147"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_bone.html">CC3Bone</a>*) bone</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the bone whose transforms are being tracked. </p>

</div>
</div>
<a class="anchor" id="ac0ff8ac07b813baaae65239221c18720"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a>*) skinNode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the skin mesh node whose transforms are being tracked. </p>

</div>
</div>
<a class="anchor" id="a24761440440ac8284ceea2641bbc6ecf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_matrix.html">CC3Matrix</a>*) transformMatrix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">retain</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the transform matrix used to draw the deformed vertices during mesh rendering. </p>
<p>This transform matrix combines the transform of the bone, the rest pose of the bone, and the rest pose of the skin mesh node.</p>
<p>This transform matrix is lazily recomputed the first time this property is accessed after the transform is marked dirty via the markTransformDirty method. This occurs automatically when either the bone or the skin mesh node being tracked by this instance is transformed.</p>
<p>The matrix in this property (T) is derived from a combination of:</p>
<ul>
<li>The transform matrix of the skin mesh node, relative to the soft-body node, as retrieved by invoking self.skinNode.skeletalTransformMatrix (Ms).</li>
<li>The inverse of that matrix, as retrieved by invoking self.skinNode.skeletalTransformMatrixInverted (Ms(-1)).</li>
<li>The transform matrix of the bone, relative to the soft-body node, as retrieved by invoking self.bone.skeletalTransformMatrix (Bs).</li>
<li>The inverse of that matrix, when the skeleton is in its rest pose, as retrieved by invoking self.bone.restPoseSkeletalTransformMatrixInverted (Bsrp(-1)).</li>
</ul>
<p>as follows, with * representing matrix multiplication:</p>
<p>T = Ms(-1) * Bs * Bsrp(-1) * Ms</p>
<p>Reading this equation right to left, we can see that when used on a vertex in the skin mesh node, this has the effect of transforming the vertex: 1) From skin-mesh-space to soft-body-space. 2) From soft-body-space to the joint-space of the bone in its rest-pose. 3) From joint-space back to soft-body-space using the transform of the bone in its current pose. 4) From soft-body-space back to the skin-mesh-space.</p>
<p>These steps are performed because the soft-body node represents the common root of the skin mesh nodes and the bones in the skeleton. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_c_c3_vertex_skinning_8h.html">CC3VertexSkinning.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<address class="footer">
<p class="footer"/>© 2010 - 2014 The Brenwill Workshop Ltd.</p>
</address>
</body>
</html>
