<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Cocos3D: Cocos3D API reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-cocos3d.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">
	   <a href="http://cocos3d.org"><img src="http://cocos3d.org/images/cocos3d-Banner-55h.png" /></a>
	   <span id="projectnumber">v2.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="category_c_c3_node_07_skinning_08-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CC3Node(Skinning) Category Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#import &lt;CC3VertexSkinning.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:acaf3b104117af9ee7cfc8ed440bc5bbd"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="category_c_c3_node_07_skinning_08.html#acaf3b104117af9ee7cfc8ed440bc5bbd">bindRestPose</a></td></tr>
<tr class="separator:acaf3b104117af9ee7cfc8ed440bc5bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2afa741047a45ad1bd94e55139ddf6e"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="category_c_c3_node_07_skinning_08.html#ad2afa741047a45ad1bd94e55139ddf6e">createSkinnedBoundingVolumes</a></td></tr>
<tr class="separator:ad2afa741047a45ad1bd94e55139ddf6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7870cccbb1985f474af3d6371c424864"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="category_c_c3_node_07_skinning_08.html#a7870cccbb1985f474af3d6371c424864">ensureRigidSkeleton</a></td></tr>
<tr class="separator:a7870cccbb1985f474af3d6371c424864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefaf0265e8b2f99e9ab38cef8694805c"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="category_c_c3_node_07_skinning_08.html#aefaf0265e8b2f99e9ab38cef8694805c">reattachBonesFrom:</a></td></tr>
<tr class="separator:aefaf0265e8b2f99e9ab38cef8694805c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b87b6c17ec84530d378fa2d0a2d74d0"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="category_c_c3_node_07_skinning_08.html#a8b87b6c17ec84530d378fa2d0a2d74d0">setSkeletalBoundingVolume:</a></td></tr>
<tr class="separator:a8b87b6c17ec84530d378fa2d0a2d74d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ab7dc69f8df858e108e70fc9f6258a347"><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="category_c_c3_node_07_skinning_08.html#ab7dc69f8df858e108e70fc9f6258a347">hasSoftBodyContent</a></td></tr>
<tr class="separator:ab7dc69f8df858e108e70fc9f6258a347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c4ff343a0bf2fd2d9df6423dcc16c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_c_c3_vector.html">CC3Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="category_c_c3_node_07_skinning_08.html#a91c4ff343a0bf2fd2d9df6423dcc16c1">skeletalScale</a></td></tr>
<tr class="separator:a91c4ff343a0bf2fd2d9df6423dcc16c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33241811980bc3c100a576de8349c99b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_soft_body_node.html">CC3SoftBodyNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="category_c_c3_node_07_skinning_08.html#a33241811980bc3c100a576de8349c99b">softBodyNode</a></td></tr>
<tr class="separator:a33241811980bc3c100a576de8349c99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_c_c3_node.html" title="CC3Node and its subclasses form the basis of all 3D artifacts in the 3D scene, including visible mesh...">CC3Node</a> extension to support ancestors and descendants that make use of vertex skinning. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="acaf3b104117af9ee7cfc8ed440bc5bbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) bindRestPose </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Binds the rest pose of any skeletons contained within the descendants of this node. </p>
<p>This method must be invoked after the initial locations and rotations of each bone in the skeletons are set.</p>
<p>These initial bone orientations are those that align with the native structure of the vertices in the mesh, and collectively are known as the rest pose of the skeleton. Changes to the transform properties of the individual bone nodes, relative to the rest pose, will deform the mesh from its natural structure.</p>
<p>The bone transforms must be calculated locally from the perspective of the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> that contains a skeleton and skin mesh. This method should only be invoked on the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> or a structural ancestor of that node,</p>
<p>This implementation simply passes this invocation along to the children of this node. Subclasses contained in the soft-body node will add additional functionality. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#acaf3b104117af9ee7cfc8ed440bc5bbd">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="ad2afa741047a45ad1bd94e55139ddf6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) createSkinnedBoundingVolumes </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes the createBoundingVolume method on any skinned mesh node descendants. </p>
<p>Skinned mesh nodes are designed to move vertices under the control of external bone nodes. Because of this, the vertices might move well beyond the bounds of a static bounding volume created from the rest pose of the skinned mesh node. For this reason, bounding volumes are not generally automatically created for skinned mesh nodes by the createBoundingVolumes method, and the bounding volumes of skinned mesh nodes are typically created by the app, by determining the maximal extent that the vertices will move, and manually assigning a larger bounding volume to cover that full extent.</p>
<p>However, if you know that the vertices of the skinned mesh nodes descendants of this node will not move beyond the static bounding volume defined by the vertices in their rest poses, you can invoke this method to have bounding volumes created automatically from the rest poses of each descendant skinned mesh nodes. This method will not affect the bounding volumes of any non-skinned descendant nodes. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#ad2afa741047a45ad1bd94e55139ddf6e">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="a7870cccbb1985f474af3d6371c424864"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) ensureRigidSkeleton </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensures the skeletal structures controlling any descendant skinned mesh nodes are composed of bones that undergo only rigid transforms, relative to their nearest ancestor soft-body node. </p>
<p>Typically, you invoke this method on the resource node, soft-body node, or other ancestor node that contains the animated skinned character model.</p>
<p>When the bones in a skeleton contain only rigid transforms, the vertices in the skinned mesh node can be transformed within a shader using rotations and transforms only, instead of requiring a full transform matrix. This allows for many more bones to be transferred to the shader program during a single GL draw call, which increases performance in many larger meshes.</p>
<p>Consequently, invoking this method affects the choice of shader that will be selected automatically for descendant skinned mesh nodes.</p>
<p>You must invoke this method in order to have such a shader automatically selected for each skinned mesh node, even if you know that all bones contain, and are animated by, only unit scales. Otherwise, automatic shader selection will select a shader that transforms vertices using bone transform matrices, instead. Alternately, if you know all bones contain, and are animated by, only unit scales, you can manually assign the appropriate shader program, and in that case, you do not need to invoke this method.</p>
<p>For each descendant bone node, this method sets the uniformScale property to 1.0, and invokes the disableScaleAnimation method to ensure that no changes will be made to the scale property during animation. You should invoke this method after all animation tracks have been added to the bone nodes, or anytime a new animation track is added.</p>
<p>After this method has been invoked, the hasRigidSkeleton properties of all descendant skinned mesh nodes will return YES. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#a7870cccbb1985f474af3d6371c424864">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="aefaf0265e8b2f99e9ab38cef8694805c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) reattachBonesFrom: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_node.html">CC3Node</a> *)&#160;</td>
          <td class="paramname"><em>aNode</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After copying a skin mesh node, the newly created copy will still be influenced by the original skeleton. </p>
<p>The result is that both the original mesh and the copy will move and be deformed in tandem as the skeleton moves.</p>
<p>If you are creating a chorus line of dancing characters, this may be the effect you are after. However, if you are creating a squadron of similar, but independently moving characters, each skin mesh node copy should be controlled by a separate skeleton.</p>
<p>After creating a copy of the skeleton bone node assembly, you can use this method to attach the skin mesh node to the new skeleton. The node that is provided as the argument to this method is the root bone node of the skeleton, or a structural ancestor of the skeleton that does not also include the original skeleton as a descendant.</p>
<p>This method iterates through all the bones referenced by any descendant skin mesh nodes, and retrieves a bone with the same name from the structural descendants of the specified node.</p>
<p>When copying a <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> instance, this method is automatically invoked as part of the copying of the soft-body object, and you do not need to invoke this method directly. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#aefaf0265e8b2f99e9ab38cef8694805c">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="a8b87b6c17ec84530d378fa2d0a2d74d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setSkeletalBoundingVolume: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_c_c3_node_bounding_volume.html">CC3NodeBoundingVolume</a> *)&#160;</td>
          <td class="paramname"><em>boundingVolume</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mesh nodes whose vertices are deformable by bones are not automatically assigned a bounding volume, because the vertices are not completely under control of the mesh node, complicating the definition of the boundary. </p>
<p>Creating bounding volumes for skinned mesh nodes is left to the application.</p>
<p>If the bones are animated independently from the mesh node, it is possible that the bones will move the entire mesh far away from the mesh node. In this situation, it is better to have the bounding volume controlled by one of the root bones of the model, but still allow the skinned mesh nodes use this bounding volume to determine if the vertices are within the camera's field of view.</p>
<p>To do this, manually create a bounding volume of the right size and shape for the movement of the vertices from the perspective of a root bone of the skeleton. Assign the bounding volume to the root bone by using the boundingVolume property, and once it has been assigned to the skeleton, use this method on an ancestor node of all of the skinned mesh nodes that are to use that bounding volume, to assign that bounding volume to all of the appropriate skinned mesh nodes. A good choice to target for the invocation of this method might be the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> of the model, or even the <a class="el" href="interface_c_c3_resource_node.html" title="A CC3ResourceNode is a CC3Node that that can be populated from a CC3NodesResource, and forms the root of the node structural assembly loaded from a resource file. ">CC3ResourceNode</a> above it, if loaded from a file.</p>
<p>During development, you can use the shouldDrawBoundingVolume property to make the bounding volume visible, to aid in determining and setting the right size and shape for it. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#a8b87b6c17ec84530d378fa2d0a2d74d0">CC3Node</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="ab7dc69f8df858e108e70fc9f6258a347"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) hasSoftBodyContent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether this structural node contains any descendant nodes that are used for soft-body vertex skinning. </p>
<p>This would include nodes of type <a class="el" href="interface_c_c3_skin_mesh_node.html" title="CC3SkinMeshNode is a CC3MeshNode specialized to use vertex skinning to draw the contents of its mesh...">CC3SkinMeshNode</a> or <a class="el" href="interface_c_c3_bone.html" title="CC3Bone is the building block of skeletons that control the deformation of a skin mesh...">CC3Bone</a>.</p>
<p>This property is a convenience used to identify nodes that should be grouped together structurally under a <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a>. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#ab7dc69f8df858e108e70fc9f6258a347">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="a91c4ff343a0bf2fd2d9df6423dcc16c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="struct_c_c3_vector.html">CC3Vector</a>) skeletalScale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the aggregate scale of this node relative to its closest soft-body ancestor. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#a91c4ff343a0bf2fd2d9df6423dcc16c1">CC3Node</a>.</p>

</div>
</div>
<a class="anchor" id="a33241811980bc3c100a576de8349c99b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_c_c3_soft_body_node.html">CC3SoftBodyNode</a>*) softBodyNode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the nearest structural ancestor node that is a soft-body node, or returns nil if no ancestor nodes are soft-body nodes. </p>

<p>Extends class <a class="el" href="interface_c_c3_node.html#a33241811980bc3c100a576de8349c99b">CC3Node</a>.</p>

</div>
</div>
<hr/>The documentation for this category was generated from the following file:<ul>
<li><a class="el" href="_c_c3_vertex_skinning_8h.html">CC3VertexSkinning.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<address class="footer">
<p class="footer"/>© 2010 - 2014 The Brenwill Workshop Ltd.</p>
</address>
</body>
</html>
